---
path: "/deploy-gatsby-site-to-github-using-actions"
title: "#1"
subtitle: "Deploy Gatsby site to Github using actions"
date: "2020-04-19"
description: "A simple guide to host your Gatsby site in Github using Github-actions"
featuredImage: "./gatsbyjs-github.jpg"
---

![Chrome Devtools](./gatsbyjs-github.jpg)

<br/>

#### What is GatsbyJS?ü§î

GatsbyJS is a static site generator based on ReactJS which helps developer build fast blazing websites.

Gatsby is great for building static public facing websites because it provides features like SEO, Image lazy-loading, prefetching resources, etc as part of its ecosystem.

Since build generated by Gatsby is just html, css, javascript, images, etc you can host with any provider.

<br/>

**Today we will learn how to host Gatsby build using Github.üë®üèª‚Äçüíª**

<br/>

<hr/>

<br/>

#### Github-Actions

Github-Actions is used to automate our workflows using bunch of jobs.

We will use [gatsby-gh-pages-action](https://github.com/marketplace/actions/gatsby-publish) by [enriikke](https://github.com/enriikke) to automate deployment.

<br/>

#### How it works?

After pushing source code to github, this action will run build command and push your build to a branch(master or gh-pages) which you have selected as deploy-branch for hosting.

<br/>

#### For username.github.io

Checkout to a branch other than master e.g. dev. This branch will contain your source code. Next time when you will push this branch action will be triggered. Specify the branch name in yml file.

<br/>

Create `main.yml` at root of your project in path `/.github/workflows` and paste this action.

```yml{numberLines: false}
name: Gatsby Publish

on:
  push:
    branches:
      - dev

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v1
      - uses: enriikke/gatsby-gh-pages-action@v2.1.1
        with:
          access-token: ${{ secrets.ganesh }}
          deploy-branch: master
```

<br/>

#### For username.github.io/sub-domain

<br/>

Specify the sub-domain name in `gatsby-config.js` for path prefixing.

```js
module.exports = {
  pathPrefix: `/sub-domain`,
}
```

<br/>

Set gh-pages to deploy-branch and --prefix-paths to gatsby-args.

```yml{numberLines: false}
name: Gatsby Publish

on:
  push:
    branches:
      - dev

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v1
      - uses: enriikke/gatsby-gh-pages-action@v2
        with:
          access-token: ${{ secrets.ACCESS_TOKEN }}
          deploy-branch: gh-pages
          gatsby-args: --prefix-paths
```

<br/>

You can create `secrets` in repository settings and get secret value from application setting by generating token with repo scope.

<br/>

#### Demo

<br/>

<iframe width="560" height="315" src="https://www.youtube.com/embed/JIMord7-G10" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>

<br/>

<hr/>

<br/>

You are amazing! ‚ú®
